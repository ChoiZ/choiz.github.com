<!DOCTYPE html>
<html lang="fr">
<head>
  <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="http://www.choiz.fr/theme/css/style.min.css">
  <link rel="stylesheet" type="text/css" href="http://www.choiz.fr/theme/css/pygments.min.css">
  <link rel="stylesheet" type="text/css" href="http://www.choiz.fr/theme/css/font-awesome.min.css">
  <link href="http://www.choiz.fr/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ChoiZ Atom">
  <link rel="shortcut icon" href="http://localhost:8000/favicon.ico" type="image/x-icon">
  <link rel="icon" href="http://localhost:8000/favicon.ico" type="image/x-icon">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="François LASSERRE" />
  <meta name="description" content="" />
<meta property="og:site_name" content="ChoiZ"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="ChoiZ"/>
<meta property="og:description" content=""/>
<meta property="og:locale" content="fr_FR"/>
<meta property="og:url" content="http://www.choiz.fr"/>
<meta property="og:image" content="avatar.png">
  <title>ChoiZ</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://www.choiz.fr">
        <img src="avatar.png" alt="Blog de François LASSERRE, ingénieur informatique." title="Blog de François LASSERRE, ingénieur informatique.">
      </a>
      <div>
          <a href="http://www.choiz.fr">Blog de François LASSERRE, ingénieur informatique.</a>
      </div>
      <nav>
        <ul class="list">
          <li><a href="/">Home</a></li>
          <li><a href="/archives">Archives</a></li>
          <li><a href="/tags">Tags</a></li>
        </ul>
      </nav>
      <p>Je suis Français, ingénieur informatique, j'aime le développement web, les logiciels libres et l'informatique.</p>
      <p>J'ai fondé plusieurs webradios depuis l'an 2000, actuellement je fais parti de l'équipe de <a href="http://www.lagrosseradio.com">La Grosse Radio</a>.</p>
      <ul class="social">
        <li><a class="sc-github" href="//www.github.com/ChoiZ"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-flickr" href="//www.flickr.com/ChoiZ"><i class="fa fa-flickr"></i></a></li>
        <li><a class="sc-lastfm" href="//www.last.fm/user/ChoiZ"><i class="fa fa-lastfm"></i></a></li>
        <li><a class="sc-twitter" href="//www.twitter.com/ChoiZ"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-facebook" href="//www.facebook.com/ChoiZ"><i class="fa fa-facebook"></i></a></li>
        <li><a class="sc-foursquare" href="//www.foursquare.com/ChoiZ"><i class="fa fa-foursquare"></i></a></li>
        <li><a class="sc-linkedin" href="//www.linkedin.com/in/ChoiZ"><i class="fa fa-linkedin"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>

<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-11-15-configurer-un-serveur-mail.html#2015-11-15-configurer-un-serveur-mail">Configurer un serveur mail</a></h2>
    <p>
      Posté le Dim 15 novembre 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/mail.html">mail</a>,      <a href="http://www.choiz.fr/tag/postfix.html">postfix</a>,      <a href="http://www.choiz.fr/tag/dovecot.html">dovecot</a>,      <a href="http://www.choiz.fr/tag/dns.html">dns</a>,      <a href="http://www.choiz.fr/tag/ssl.html">ssl</a>,      <a href="http://www.choiz.fr/tag/rainloop.html">rainloop</a>,      <a href="http://www.choiz.fr/tag/webmail.html">webmail</a>    </p>
  </header>
  <div>
      <p>Installation d'un serveur mail complet et à jour sous debian jessie (8.2).</p>
<div class="section" id="configuration-des-dns">
<h2>Configuration des DNS</h2>
<p>Pour commencer nous allons créer des entrées DNS.</p>
<p>Nous créons un MX pour les mails avec une priorité de 1, un sous domaine &quot;mail&quot; qui pointe vers l'adresse ipv4 de votre serveur, d'un sous domaine webmail qui pointe sur le sous domaine mail et d'un enregistrement SPF</p>
<pre class="literal-block">
votredomaine.com.           MX      1   mail.votredomaine.com.
mail.votredomaine.com.      A           ip.v4.du.serveur
webmail.votredomaine.com.   CNAME       mail.votredomaine.com.
votredomain.com.            SPF         &quot;v=spf1 ip4:ip.v4.du.server ~all&quot;
</pre>
</div>
<div class="section" id="installation-des-paquets">
<h2>Installation des paquets</h2>
<p>Maintenant installons postfix dovecot-imapd et sasl2-bin :</p>
<pre class="literal-block">
apt-get install postfix dovecot-imapd sasl2-bin php5-curl
</pre>
<p>Configurer le serveur de messagerie comme &quot;Site Internet&quot;, puis en nom de courrier indiquer &quot;mail.votredomaine.com&quot;.</p>
</div>
<div class="section" id="configuration-de-dovecot">
<h2>Configuration de dovecot</h2>
<p>Créer un dossier ssl dans dovecot :</p>
<pre class="literal-block">
mkdir /etc/dovecot/ssl &amp;&amp; cd /etc/dovecot/ssl
</pre>
<p>Créer un certificat ssl :</p>
<pre class="literal-block">
openssl req -new -newkey rsa:2048 -nodes -keyout certificat.key -out certificat.csr
</pre>
<p>Puis répondre aux différentes questions pour ma part j'ai répondu :</p>
<pre class="literal-block">
FR
(vide)
Paris
votredomaine
IT
mail.votredomaine.com
contact&#64;votredomaine.com
(vide)
(vide)
</pre>
<p>Ensuite :</p>
<pre class="literal-block">
openssl x509 -req -days 365 -in certificat.csr -signkey certificat.key -out certificat.crt
</pre>
<p>Puis :</p>
<pre class="literal-block">
cat certificat.key certificat.crt &gt; certificat.pem
</pre>
<p>Créer le groupe et l'utilisateur vmail :</p>
<pre class="literal-block">
groupadd -g 5000 vmail
useradd -m -d /var/vmail -s /bin/false -u 5000 -g vmail vmail
</pre>
<p>Ajouter dans /etc/dovecot/dovecot.conf</p>
<pre class="literal-block">
listen = ip.v4.du.server
</pre>
<p>Editer /etc/dovecot/conf.d/10-auth.conf</p>
<pre class="literal-block">
disable_plaintext_auth = yes
auth_username_format = %Lu
#!include auth-system.conf.ext
!include auth-passwdfile.conf.ext
</pre>
<p>Editer /etc/dovecot/conf.d/10-logging.conf</p>
<pre class="literal-block">
auth_verbose = yes
mail_debug = yes
</pre>
<p>Editer /etc/dovecot/conf.d/10-master.conf</p>
<pre class="literal-block">
unix_listener /var/spool/postfix/private/auth {
  mode = 0666
  user = postfix
  group = postfix
}
</pre>
<p>Editer /etc/dovecot/conf.d/10-ssl.conf</p>
<pre class="literal-block">
ssl = required
ssl_cert = &lt;/etc/dovecot/ssl/certificat.pem
ssl_key = &lt;/etc/dovecot/ssl/certificat.key
</pre>
<p>Editer /etc/dovecot/conf.d/15-mailboxes.conf</p>
<pre class="literal-block">
mailbox Drafts {
    auto = subscribe
    special_use = \Drafts
}

mailbox Junk {
    auto = subscribe
    special_use = \Junk
}

mailbox Trash {
    auto = subscribe
    special_use = \Trash
}

mailbox Sent {
    auto = subscribe
    special_use = \Sent
}

#mailbox &quot;Sent Messages&quot; {
#    special_use = \Sent
#}
</pre>
<p>Editer /etc/dovecot/conf.d/auth-passwdfile.conf.ext</p>
<pre class="literal-block">
passdb {
    driver = passwd-file
    args = scheme=MD5 username_format=%u /etc/dovecot/users
}

userdb {
    driver = passwd-file
    args = username_format=%u /etc/dovecot/users
    default_fields = uid=5000 gid=5000 home=/var/vmail/%d mail=maildir:~/%u
}
</pre>
<p>Créer le fichier /etc/dovecot/users</p>
<pre class="literal-block">
touch /etc/dovecot/users
</pre>
<p>Puis pour chaque mail créer un enregistrement :</p>
<pre class="literal-block">
adresse&#64;votredomaine.com:motdepassemd5:::::::
</pre>
<p>Le format est le suivant :</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Champ</th>
<th class="head">Valeur</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Adresse email</td>
<td><a class="reference external" href="mailto:adresse&#64;votredomaine.com">adresse&#64;votredomaine.com</a></td>
</tr>
<tr><td>Mot de passe (MD5)</td>
<td>motdepassemd5</td>
</tr>
<tr><td>uid</td>
<td>déjà défini dans auth-passwdfile</td>
</tr>
<tr><td>gid</td>
<td>déjà défini dans auth-passwdfile</td>
</tr>
<tr><td>home directory</td>
<td>déjà défini dans auth-passwdfile</td>
</tr>
<tr><td>mail directory</td>
<td>déjà défini dans auth-passwdfile</td>
</tr>
</tbody>
</table>
<p>Tester votre utilisateur grâce à la commande :</p>
<pre class="literal-block">
doveadm user adresse&#64;votredomaine.com
</pre>
<p>Ce qui devrait afficher :</p>
<pre class="literal-block">
field   value
uid     5000
gid     5000
home    /var/vmail/votredomaine.com
mail    maildir:~/adresse&#64;votredomaine.com
</pre>
<p>Démarrer dovecot :</p>
<pre class="literal-block">
/etc/init.d/dovecot start
</pre>
<p>Tester la connexion :</p>
<pre class="literal-block">
openssl s_client -connect ip.v4.du.server:993
</pre>
<p>Si vous avez &quot;* OK [CAPABILITY …] Dovecot ready.
Vous pouvez vous authentifier :</p>
<pre class="literal-block">
. LOGIN adresse&#64;votredomaine.com motdepasseenclair
</pre>
<p>C'est fini pour dovecot.</p>
</div>
<div class="section" id="configuration-de-sasl">
<h2>Configuration de sasl</h2>
<p>Editer /etc/default/saslauthd :</p>
<pre class="literal-block">
START=yes
OPTIONS=&quot;-m /var/spool/postfix/var/run/saslauthd&quot;
</pre>
<p>Puis lancer :</p>
<pre class="literal-block">
/etc/init.d/saslauthd start
</pre>
<p>C'est fini pour sasl</p>
</div>
<div class="section" id="configuration-de-postfix">
<h2>Configuration de postfix</h2>
<p>Editer /etc/postfix/main.cf : ::</p>
<pre class="literal-block">
smtpd_banner = $myhostname ESMTP $mail_name
smtpd_tls_cert_file=/etc/dovecot/ssl/certificat.pem
smtpd_tls_key_file=/etc/dovecot/ssl/certificat.key
mynetworks = 127.0.0.0/8 ip.v4.du.server

virtual_mailbox_domains = votredomaine.com, autredomaine.com
virtual_mailbox_base = /var/vmail
virtual_mailbox_maps = hash:/etc/postfix/virtual_mailbox
virtual_minimum_uid = 100
virtual_uid_maps = static:5000
virtual_gid_maps = static:5000
virtual_alias_maps = hash:/etc/postfix/virtual_alias

smtpd_sasl_auth_enable = yes
smtpd_sasl_type = dovecot
smtpd_sasl_path = private/auth
smtpd_sasl_security_options = noanonymous
smtpd_sasl_tls_security_options = noanonymous
smtpd_sasl_local_domain = $myhostname

broken_sasl_auth_clients = yes

smtpd_helo_restrictions = reject_unknown_helo_hostname
smtpd_sender_restrictions = permit_sasl_authenticated reject_unknown_sender_domain
smtpd_recipient_restrictions = permit_sasl_authenticated permit_mynetworks reject_unauth_destination

smtpd_enforce_tls = no
smtpd_tls_auth_only = no
smtpd_tls_ask_ccert = no
smtpd_tls_received_header = yes
tls_random_source = dev:/dev/urandom
</pre>
<p>Créer /etc/postfix/virtual_alias :</p>
<pre class="literal-block">
touch /etc/postfix/virtual_alias
</pre>
<p>Pour créer un alias, éditer /etc/postfix/virtual_alias :</p>
<pre class="literal-block">
alias&#64;votredomaine.com          destination&#64;votredomaine.com
</pre>
<p>Créer /etc/postfix/virtual_domains :</p>
<pre class="literal-block">
touch /etc/postfix/virtual_domains
</pre>
<p>Pour gérer vos domaines, éditer /etc/postfix/virtual_domains :</p>
<pre class="literal-block">
votredomaine.com                OK
votredeuxiemedomaine.com        OK
</pre>
<p>Créer /etc/postfix/virtual_mailbox :</p>
<pre class="literal-block">
touch /etc/postfix/virtual_mailbox
</pre>
<p>Pour créer un comte mail, éditer /etc/postfix/virtual_mailbox :</p>
<pre class="literal-block">
email&#64;votredomaine.com          votredomaine.com/email&#64;votredomaine.com/
linus&#64;torvald.com               torvald.com/linus&#64;torvald.com/
</pre>
<p>N'oubliez pas lors de la création de nouveau comptes mail d'éditer /etc/dovecot/users ;-)</p>
<p>Maintenant il faut dire a postfix que nous avons modifier nos fichiers virtuels :</p>
<pre class="literal-block">
postmap /etc/postfix/virtual_alias
postmap /etc/postfix/virtual_domains
postmap /etc/postfix/virtual_mailbox
</pre>
<p>Editer /etc/postfix/master.cf :</p>
<pre class="literal-block">
smtp    inet    n   -   -   -   -   smtpd   -v
 -o smtpd_tls_cert_file=/etc/dovecot/ssl/certificat.pem
 -o smtpd_tls_key_file=/etc/dovecot/ssl/certificat.key
submission inet n - n - - smtpd
 -o smtpd_tls_security_level=encrypt
 -o smtpd_sasl_auth_enable=yes
urd inet n - n - - smtpd
 -o smtpd_tls_wrappermode=yes
 -o smtpd_sasl_auth_enable=yes
smtps   inet    n   -   -   -   -   smtpd   -v
 -o smtpd_tls_wrappermode=yes
 -o smtpd_tls_cert_file=/etc/dovecot/ssl/certificat.pem
 -o smtpd_tls_key_file=/etc/dovecot/ssl/certificat.key
</pre>
<p>Puis redemarrer postfix :</p>
<pre class="literal-block">
/etc/init.d/postfix restart
</pre>
<p>Fin de la configuration de postfix.</p>
<p>Vous pouvez maintenant tester votre serveur mail ainsi que la qualité de votre serveur sur le site <a class="reference external" href="http://www.mail-tester.com">http://www.mail-tester.com</a></p>
</div>
<div class="section" id="installation-d-un-webmail-rainloop">
<h2>Installation d'un webmail rainloop</h2>
<p>Créer un dossier pour votre webmail :</p>
<pre class="literal-block">
mkdir -p /var/www/webmail/public &amp;&amp; cd /var/www/webmail/public
</pre>
<p>Télécharger rainloop :</p>
<pre class="literal-block">
wget http://repository.rainloop.net/v2/webmail/rainloop-community-latest.zip
</pre>
<p>Décompresser rainloop :</p>
<pre class="literal-block">
unzip rainloop*.zip &amp;&amp; rm -rf rainloop*.zip
</pre>
<p>Modifier les droits :</p>
<pre class="literal-block">
chown -R www-data:www-data /var/www/webmail
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
</pre>
<p>Créer un vhost pour apache dans <cite>/etc/apache2/site-enabled/001-webmail.domain.com.conf</cite></p>
<pre class="literal-block">
&lt;VirtualHost *:80&gt;
    ServerAdmin contact&#64;domain.com
    ServerName mail.domain.com

    DocumentRoot /var/www/webmail/public
    &lt;Directory /var/www/webmail/public&gt;
        Options FollowSymLinks
        #Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    &lt;/Directory&gt;

    &lt;Directory /var/www/webmail/public/data&gt;
        Options -FollowSymLinks
        AllowOverride None
        Order allow,deny
        Deny from all
    &lt;/Directory&gt;

    ErrorLog ${APACHE_LOG_DIR}/webmail_error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/webmail_access.log combined
&lt;/VirtualHost&gt;
</pre>
<p>N'oubliez pas de redémarrer apache :</p>
<pre class="literal-block">
/etc/init.d/apache2 restart
</pre>
<p>Pour configurer rainloop se rendre sur : <a class="reference external" href="http://mail.domain.com/?admin">http://mail.domain.com/?admin</a></p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Login</th>
<th class="head">admin</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Password</td>
<td>12345</td>
</tr>
</tbody>
</table>
<p>Changer la langue et votre mot de passe (dans <cite>security</cite>).</p>
<p>Puis dans <cite>domains</cite> configurez votre nom de domaine en cliquant sur <cite>+ Add domain</cite></p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<tbody valign="top">
<tr><td>Name</td>
<td>domaine.com</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">IMAP</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Server</td>
<td>mail.domain.com</td>
</tr>
<tr><td>Secure</td>
<td>SSL/TLS</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">SMTP</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Server</td>
<td>mail.domain.com</td>
</tr>
<tr><td>Secure</td>
<td>SSL/TLS</td>
</tr>
</tbody>
</table>
<p>Puis <cite>+ Add</cite></p>
<p>Je supprime tous les autres domaines (gmail etc…)</p>
<p>Ensuite j'active les plugins, et les packages : X-Originating-IP, Black list et White list.</p>
<p>Maintenant rendez-vous sur : <a class="reference external" href="http://mail.domain.com">http://mail.domain.com</a> et identifiez-vous avec votre login et mot de passe.</p>
</div>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-10-25-gentoo-navigateur-web-par-defaut.html#2015-10-25-gentoo-navigateur-web-par-defaut">Gentoo Navigateur Web par Défaut</a></h2>
    <p>
      Posté le Dim 25 octobre 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/gentoo.html">gentoo</a>,      <a href="http://www.choiz.fr/tag/web.html">web</a>,      <a href="http://www.choiz.fr/tag/browser.html">browser</a>,      <a href="http://www.choiz.fr/tag/default.html">default</a>,      <a href="http://www.choiz.fr/tag/navigateur.html">navigateur</a>    </p>
  </header>
  <div>
      <p>Sur ma machine &quot;links&quot; était le navigateur web par défaut.
Il est pratique pour lire du texte, dès que l'on a du contenu audio ou vidéo il est préférable d'utiliser un navigateur tel que Firefox.</p>
<p>Voici la commande pour voir le navigateur par défaut pour les url utilisants le protocole &quot;http&quot; :</p>
<blockquote>
xdg-mime query default x-scheme-handler/http</blockquote>
<p>Et voici la commande pour le &quot;https&quot; :</p>
<blockquote>
xdg-mime query default x-scheme-handler/https</blockquote>
<p>Pour changer le navigateur par défaut par Firefox il suffit d'executer ses deux commandes :</p>
<blockquote>
<p>xdg-mime default firefox.desktop x-scheme-handler/http</p>
<p>xdg-mime default firefox.desktop x-scheme-handler/https</p>
</blockquote>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-10-13-vagrant-faire-un-reseau-prive.html#2015-10-13-vagrant-faire-un-reseau-prive">Vagrant faire un réseau privé</a></h2>
    <p>
      Posté le Mar 13 octobre 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/vagrant.html">vagrant</a>,      <a href="http://www.choiz.fr/tag/reseau.html">réseau</a>,      <a href="http://www.choiz.fr/tag/prive.html">privé</a>,      <a href="http://www.choiz.fr/tag/private.html">private</a>,      <a href="http://www.choiz.fr/tag/network.html">network</a>    </p>
  </header>
  <div>
      <p>J'utilise plusieurs machines virtuelles avec vagrant, une avec un backoffice et une avec une API.</p>
<p>J'ai donc du faire un réseau privé dans vagrant pour que le BO communique avec l'API.</p>
<p>Il suffit de modifier la configuration de la vm #1 et d'ajouter :</p>
<blockquote>
config.vm.network &quot;private_network&quot;, ip: &quot;192.168.10.1&quot;</blockquote>
<p>Et dans la configuration de la vm #2 d'ajouter :</p>
<blockquote>
config.vm.network &quot;private_network&quot;, ip: &quot;192.168.10.2&quot;</blockquote>
<p>Votre vm #1 peut (suite au redémarrage des deux vm vagrant) communiquer avec votre vm #2 directement avec l'ip <cite>192.168.10.2</cite>.</p>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-10-12-des-commentaires-efficaces.html#2015-10-12-des-commentaires-efficaces">Des commentaires efficaces</a></h2>
    <p>
      Posté le Lun 12 octobre 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/commentaire.html">commentaire</a>,      <a href="http://www.choiz.fr/tag/code.html">code</a>,      <a href="http://www.choiz.fr/tag/efficace.html">efficace</a>    </p>
  </header>
  <div>
      <p>Dans mes fichiers de test j'utilise souvent des commentaires pour tester qu'une fonctionnalité de code.</p>
<p>Par exemple pour tester une api :</p>
<blockquote>
<p>// Obtenir le livre #1</p>
<p>api_get('books/1');</p>
<p>// Ajouter un livre</p>
<p>api_add('books', $datas);</p>
</blockquote>
<p>Je test généralement chaque élément séparement.</p>
<p>Pour tester la première portion de mon code :</p>
<blockquote>
<p>//* Obtenir le livre #1</p>
<p>api_get('books/1');</p>
<p>//*/</p>
<p>/* Ajouter un livre</p>
<p>api_add('books', $datas);</p>
<p>//*/</p>
</blockquote>
<p>Pour tester la seconde portion de mon code :</p>
<blockquote>
<p>/* Obtenir le livre #1</p>
<p>api_get('books/1');</p>
<p>//*/</p>
<p>//* Ajouter un livre</p>
<p>api_add('books', $datas);</p>
<p>//*/</p>
</blockquote>
<p>Il me suffit d'ajouter ou d'enlever un slash sur le premier commentaire pour commenter ou non tout le bloc.</p>
<p>Ce n'est pas forcément très lisible donc je fais ça uniquement pour mes tests.</p>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-09-27-mettre-a-jour-gentoo.html#2015-09-27-mettre-a-jour-gentoo">Mettre à jour Gentoo</a></h2>
    <p>
      Posté le Dim 27 septembre 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/update.html">update</a>,      <a href="http://www.choiz.fr/tag/mise-a-jour.html">mise à jour</a>,      <a href="http://www.choiz.fr/tag/gentoo.html">gentoo</a>,      <a href="http://www.choiz.fr/tag/eix.html">eix</a>,      <a href="http://www.choiz.fr/tag/emerge.html">emerge</a>    </p>
  </header>
  <div>
      <p>Pour mettre à jour Gentoo j'utilise différentes commandes.</p>
<p>Dans un premier temps je fais la mise à jour d'eix :</p>
<blockquote>
eix-sync</blockquote>
<p>Ensuite :</p>
<blockquote>
emerge -pvuDN world</blockquote>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-p</span></kbd></td>
<td>ou --pretend, permet d'afficher ce qui sera mis à jour. Affiche également les différents flags (N = new (not yet installed), U = updating (to another version) etc…)</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-v</span></kbd></td>
<td>ou --verbose, mode verbeux.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-u</span></kbd></td>
<td>ou --update, met à jour les programmes dans la meilleur version disponible.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-D</span></kbd></td>
<td>ou --deep, met à jour les dépendances des programmes si nécessaire.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-N</span></kbd></td>
<td>ou --newuse, met à jour les programmes dont le &quot;USE&quot; a été modifié depuis son installation.</td></tr>
</tbody>
</table>
<p>Une fois la liste des programmes et ses modifications vérifiée nous pouvons lancer la mise à jour :</p>
<blockquote>
emerge -vuDN world</blockquote>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-09-06-compilation-kernel-gentoo.html#2015-09-06-compilation-kernel-gentoo">Compilation Kernel Gentoo</a></h2>
    <p>
      Posté le Dim 06 septembre 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/compilation.html">compilation</a>,      <a href="http://www.choiz.fr/tag/kernel.html">kernel</a>,      <a href="http://www.choiz.fr/tag/gentoo.html">gentoo</a>    </p>
  </header>
  <div>
      <p>Pour compiler le kernel sous gentoo :</p>
<blockquote>
<p>cd /usr/src/linux</p>
<p>make menuconfig</p>
<p>make &amp;&amp; make modules_install</p>
<p>make install</p>
</blockquote>
<p>Le kernel est maintenant compilé.</p>
<p>Maintenant il faut mettre à jour grub.</p>
<blockquote>
grub2-mkconfig -o /boot/grub/grub.cfg</blockquote>
<p>Puis lancer <cite>uname -a</cite> qui affiche le kernel actuellement utilisé ainsi que le nombre de compilation.</p>
<p>Il faut maintenant redémarrer la machine :</p>
<blockquote>
reboot</blockquote>
<p>Au final vérifier avec <cite>uname -a</cite> si le bon kernel est chargé.</p>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-08-30-compression-decompression-tar-gz-tar-bz2-tar-xz.html#2015-08-30-compression-decompression-tar-gz-tar-bz2-tar-xz">Compression Décompression tar.gz tar.bz2 tar.xz</a></h2>
    <p>
      Posté le Dim 30 août 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/targz.html">tar.gz</a>,      <a href="http://www.choiz.fr/tag/tarbz2.html">tar.bz2</a>,      <a href="http://www.choiz.fr/tag/tarxz.html">tar.xz</a>,      <a href="http://www.choiz.fr/tag/tar.html">tar</a>,      <a href="http://www.choiz.fr/tag/gz.html">gz</a>,      <a href="http://www.choiz.fr/tag/gzip.html">gzip</a>,      <a href="http://www.choiz.fr/tag/bz2.html">bz2</a>,      <a href="http://www.choiz.fr/tag/xz.html">xz</a>,      <a href="http://www.choiz.fr/tag/lzma.html">lzma</a>    </p>
  </header>
  <div>
      <p>J'ai toujours du mal pour décompresser un fichier de type &quot;tar.bz2&quot; ou &quot;tar.xz&quot;. Je n'ai pas encore trouvé le moyen de me souvenir de la syntaxe…</p>
<div class="section" id="tar-gz">
<h2>tar.gz</h2>
<p>Pour les fichiers <strong>tar.gz</strong> j'arrive parfaitement à compresser ou décompresser ce format exemple :</p>
<p>On compresse avec :</p>
<blockquote>
tar -cvzf archive.tar.gz dossier_a_compresser/</blockquote>
<p>On décompresse avec :</p>
<blockquote>
tar -xvzf archive.tar.gz</blockquote>
<p>Il suffit de retenir :</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-c</span></kbd></td>
<td>comme compression / &quot;x&quot; comme eXtract ou eXtraction.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-v</span></kbd></td>
<td>pour le mode verbeux.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-z</span></kbd></td>
<td>pour le &quot;gzip&quot; d'ou le &quot;.gz&quot;.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-f</span></kbd></td>
<td>pour spécifier le fichier.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="tar-bz2">
<h2>tar.bz2</h2>
<p>Pour les <strong>tar.bz2</strong> je ne sais JAMAIS qu'il faut remplacer &quot;z&quot; de gizip par &quot;j&quot; de Bzip… (la lettre &quot;b&quot; étant sans doute utilisé avant que le bzip n'apparaisse).
L'alternative est d'utiliser &quot;--bzip&quot;</p>
<p>On compresse avec :</p>
<blockquote>
tar -cvjf archive.tar.bz2 dossier_a_compresser/</blockquote>
<p>Ou :</p>
<blockquote>
tar --bzip2 -cvf archive.tar.bz2 dossier_a_compresser/</blockquote>
<p>On décompresse avec :</p>
<blockquote>
tar -xvjf archive.tar.bz2</blockquote>
<p>Ou :</p>
<blockquote>
tar --bzip2 -xvf archive.tar.bz2</blockquote>
</div>
<div class="section" id="tar-xz">
<h2>tar.xz</h2>
<p>Pour ce qui est de Lzma ou le <strong>tar.xz</strong> c'est un &quot;J&quot; majuscule cette fois ou d'utiliser &quot;--xz&quot;.</p>
<p>On compresse avec :</p>
<blockquote>
tar -cvJf archive.tar.xz dossier_a_compresser/</blockquote>
<p>Ou :</p>
<blockquote>
tar --xz -cvf archive.tar.xz dossier_a_compresser/</blockquote>
<p>On décompresse avec :</p>
<blockquote>
tar -xvJf archive.tar.xz</blockquote>
<p>Ou :</p>
<blockquote>
tar --xz -xvf archive.tar.xz</blockquote>
</div>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-08-25-suppression-des-branches-distantes-inexistantes.html#2015-08-25-suppression-des-branches-distantes-inexistantes">Suppression des branches distantes inexistantes</a></h2>
    <p>
      Posté le Mar 25 août 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/git.html">git</a>,      <a href="http://www.choiz.fr/tag/branch.html">branch</a>,      <a href="http://www.choiz.fr/tag/remote.html">remote</a>,      <a href="http://www.choiz.fr/tag/prune.html">prune</a>,      <a href="http://www.choiz.fr/tag/origin.html">origin</a>    </p>
  </header>
  <div>
      <p>Lors d'un developpement j'ai créé une branche &quot;add_namespace&quot; qui m'a permis d'ajouté des namespaces a différents fichiers PHP.</p>
<p>Une fois la modification faite j'ai envoyé ma branche sur l'origin, en faisant un &quot;pull request&quot; (github) ou &quot;merge request&quot; (gitlab).</p>
<p>Un autre développeur a accepté mon pull request (il a donc mergé la branche) et a supprimé ma branche de l'origine.</p>
<p>Sur mon environnement je vois toujours cette branche.</p>
<blockquote>
<p>git branch -a</p>
<p>* master</p>
<p>remote/origin/HEAD -&gt; origin/master</p>
<p>remote/origin/add_namespace</p>
<p>remote/origin/master</p>
</blockquote>
<p>Pour pouvoir effacer cette branche dans le remote, il suffit de tapper la commande :</p>
<blockquote>
<p>git remote prune origin</p>
<p>Élimination de origin</p>
<p>URL : <a class="reference external" href="mailto:git&#64;git.mondomain.com">git&#64;git.mondomain.com</a>:mondepot.git</p>
<p>&nbsp;* [éliminé] origin/add_namespace</p>
</blockquote>
<p>Maintenant, vérifions que tout est propre :</p>
<blockquote>
<p>git branch -a</p>
<p>* master</p>
<p>remote/origin/HEAD -&gt; origin/master</p>
<p>remote/origin/master</p>
</blockquote>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-08-20-migration-de-tumblr-a-pelican.html#2015-08-20-migration-de-tumblr-a-pelican">Migration de Tumblr à Pelican</a></h2>
    <p>
      Posté le Jeu 20 août 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/tumblr.html">tumblr</a>,      <a href="http://www.choiz.fr/tag/migration.html">migration</a>,      <a href="http://www.choiz.fr/tag/pelican.html">pelican</a>,      <a href="http://www.choiz.fr/tag/site.html">site</a>,      <a href="http://www.choiz.fr/tag/static.html">static</a>,      <a href="http://www.choiz.fr/tag/python.html">python</a>    </p>
  </header>
  <div>
      <p>J'ai testé pelican, lors de mon voyage à Bruxelles en Thalys le 15 Août 2014.
Depuis cette date je n'avais pas pris le temps de m'occuper de la migration de mon blog de tumblr vers pelican.</p>
<p><a class="reference external" href="http://blog.getpelican.com/">Pelican</a> est un générateur de site statique, il est pratique pour la gestion des articles tel que mon blog.</p>
<p>Il suffit de créer un fichier texte avec le contenu de l'article et l'envoyer sur github pour que celui-ci soit publié.</p>

  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://www.choiz.fr/2015-08-08-touche-pour-sortir-sa-machine-de-veille.html#2015-08-08-touche-pour-sortir-sa-machine-de-veille">Touche pour sortir sa machine de veille</a></h2>
    <p>
      Posté le Sam 08 août 2015 &#8226;
Tags :
      <a href="http://www.choiz.fr/tag/touche.html">touche</a>,      <a href="http://www.choiz.fr/tag/sortie.html">sortie</a>,      <a href="http://www.choiz.fr/tag/veille.html">veille</a>,      <a href="http://www.choiz.fr/tag/ordinateur.html">ordinateur</a>,      <a href="http://www.choiz.fr/tag/shift.html">shift</a>,      <a href="http://www.choiz.fr/tag/clavier.html">clavier</a>    </p>
  </header>
  <div>
      <p>Il y a quelques années, pour sortir ma machine de veille j'utilisais la
touche &quot;enter&quot; ou &quot;escape&quot;.</p>
<p>Ça fonctionne, sauf que si vous êtes dans un programme d'installation
qui demande une confirmation (formater tout le disque par exemple), en
appuyant sur &quot;enter&quot; vous allez confirmer le formatage.</p>
<p>Avec la touche escape vous allez généralement annuler une action que
l'on vous demande.</p>
<p>Même problème avec toutes les autres touches : &quot;espace&quot; confirme
généralement, &quot;o&quot; pour &quot;oui&quot;, &quot;y&quot; pour &quot;yes&quot;, &quot;n&quot; pour &quot;no&quot; ou &quot;non&quot;, ou
une quantité &quot;1&quot;, &quot;2&quot;, ou toute autre lettre défini tel que &quot;a&quot; pour
&quot;annuler&quot;, &quot;c&quot; pour &quot;cancel&quot;…</p>
<p>Bref la seule touche que j'utilise pour sortir mon ordinateur de veille
est &quot;shift&quot;. Que ça soit le &quot;shift&quot; droit ou gauche il ne fais jamais
d'action spécifique à ma connaissance.</p>

  </div>
</article>

  <div class="pagination">
    <a class="btn" href="http://www.choiz.fr/index2.html">
      <i class="fa fa-angle-left"></i> Anciens articles
    </a>
  </div>

    <footer>
      <p>&copy; François LASSERRE </p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/choiz/Flexfork" target="_blank">Flexfork</a> theme by <a href="http://www.choiz.fr">François LASSERRE</a></p>    </footer>
  </main>
<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " ChoiZ ",
  "url" : "http://www.choiz.fr",
  "image": "avatar.png",
  "description": ""
}
</script></body>
</html>